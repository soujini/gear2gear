<div *ngIf="tdMessage" class="alert alert-danger text-center col-12">
  <strong>Error! </strong>{{tdMessage}}
</div>
<form [formGroup]="investmentRecordsForm" (ngSubmit)="onSubmit2()" >
  <div class="col-12">
  <div class="form-group">
    <div>
      <div class="md-form mt-0">
        <table class="table">
          <thead class="#f5f5f5 grey lighten-4">
            <tr>
              <th>Date</th>
              <th>Transaction Type</th>
              <th>Investor</th>
              <th>Expense Type</th>
              <th>Description</th>
              <th>Credit</th>
              <th>Debit</th>
              <!-- <th>Add</th> -->
            </tr>
          </thead>
          <tbody>
            <tr>
            <td>
              <input type="date" class="form-control" formControlName="date" placeholder="Date">
                <app-control-messages [control]="investmentRecordsForm.controls.date"></app-control-messages>
            </td>
            <td>
              <select class="form-control" formControlName="transaction_type_id" (change)="getSelectedMode($event.target.value)">
                <option *ngFor="let tt of transactionTypes$ |async" [value]="tt.transaction_type_id">{{tt.transaction_type_id}}{{tt.name}}
                </option>
              </select>
              <app-control-messages [control]="investmentRecordsForm.controls.transaction_type_id"></app-control-messages>
            </td>
            <td>
              <select class="form-control" formControlName="investor_id" (change) = "validateAmountAgainstBalance(this)">
                <option *ngFor="let investor of investors$ | async" [value]="investor.client_id">{{investor.name}}</option>
              </select>
              <app-control-messages [control]="investmentRecordsForm.controls.investor_id"></app-control-messages>
            </td>
            <td>
              <select class="form-control" formControlName="expense_id">
                <option *ngFor="let expense of expenses$ | async" [value]="expense.expense_id">{{expense.expense_id}}{{expense.name}}</option>
              </select>
              <app-control-messages [control]="investmentRecordsForm.controls.expense_id"></app-control-messages>
            </td>
            <td>
              <input type="text" class="form-control" formControlName="description" placeholder="Description">
              <app-control-messages [control]="investmentRecordsForm.controls.description"></app-control-messages>
            </td>
            <td>
              <input type="text" class="form-control" formControlName="credit" placeholder="Credit" (keyup)="formatCurrency(investmentRecordsForm.controls.credit)">
              <app-control-messages [control]="investmentRecordsForm.controls.credit"></app-control-messages>
            </td>
            <td>
              <input type="text" class="form-control" formControlName="debit" placeholder="debit" (keyup)="formatCurrency(investmentRecordsForm.controls.debit)">
              <app-control-messages [control]="investmentRecordsForm.controls.debit"></app-control-messages>
            </td>
          </tr>
        </tbody>
        </table>

        <button type="submit" class="btn btn-primary btn-custom btn-md">
          <i class="fa fa-save"></i>
        </button>
        <table class="table">
          <thead class="#f5f5f5 grey lighten-4">
            <tr>
              <th>Date</th>
              <th>Transaction Type</th>
              <th>Investor</th>
              <th>Expense Type</th>
              <th>Description</th>
              <th>Credit</th>
              <th>Debit</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of investmentRecords$ |async; let i = index;">
            <td> {{item.date}}</td>
             <td>
              <select class="form-control" value="item.transaction_type_id" disabled>
                <option *ngFor="let tt of transactionTypes$ | async" [value]="tt.transaction_type_id" [selected] = "item.transaction_type_id == tt.transaction_type_id">{{tt.transaction_type_id}}{{tt.name}}</option>
              </select>
            </td>
            <td>
              <select class="form-control" value="item.investor_id" disabled>
                <option *ngFor="let investor of investors$ | async" [value]="investor.client_id" [selected] = "item.investor_id == investor.client_id">{{investor.name}}</option>
              </select>
            </td>
            <td>
              <select class="form-control" value="item.expense_id" disabled>
                <option *ngFor="let expense of expenses$ | async" [value]="expense.expense_id" [selected] = "item.expense_id == expense.expense_id">{{expense.expense_id}}{{expense.name}}</option>
              </select>
            </td>
            <td><input type="text" class="form-control" formControlName="description" disabled value={{item.description}} placeholder="Description"></td>
            <td><input type="text" class="form-control" formControlName="credit"  placeholder="Credit"></td>
            <td><input type="text" class="form-control" formControlName="debit"  placeholder="Debit"></td>
          </tr>
        </tbody>
        </table>
      </div>
    </div>
  </div>
  </div>
</form>
