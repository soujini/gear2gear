
<section class="container-fluid section">
  <div class="row">
    <mat-tab-group class="col-12">
      <mat-tab  label="Car Details">
        <div class="col-12 grey lighten-4">
          <header class="header row">
            <div class="col-12">
              <app-title [title]=title></app-title>
              <div *ngIf="message != ''" class="alert alert-success text-center col-12">
                <strong>Success!</strong>{{message}}
              </div>
            </div>
          </header>

          <div class="col-12">
            <form [formGroup]="carForm" (ngSubmit)="onSubmit()" >
              <div class="col-12">
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Make</label>
                  <div>
                    <div class="md-form mt-0">
                      <select class="form-control" formControlName="make">
                        <option *ngFor="let make of makes$ | async" [value]="make.make_id">{{make.name}}</option>
                      </select>
                      <!-- <app-control-messages [control]="carForm.controls.make"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Model</label>
                  <div>
                    <div class="md-form mt-0">
                      <select class="form-control" formControlName="model">
                        <option *ngFor="let model of models$ | async" [value]="model.model_id">{{model.name}}</option>

                      </select>
                      <app-control-messages [control]="carForm.controls.model"></app-control-messages>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Description</label>
                  <div>
                    <div class="md-form mt-0">
                      <input type="text" class="form-control" formControlName="description">

                      <!-- <app-control-messages [control]="carForm.controls.year"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Registration Number</label>
                  <div>
                    <div class="md-form mt-0">
                      <input type="text" class="form-control" formControlName="license_plate">

                      <!-- <app-control-messages [control]="carForm.controls.year"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Variant</label>
                  <div>
                    <div class="md-form mt-0">
                      <select class="form-control"  formControlName="variant">
                        <option *ngFor="let variant of variants$ | async" [value]="variant.variant_id">{{variant.name}}</option>

                      </select>
                      <!-- <app-control-messages [control]="carForm.controls.variant"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Make Year</label>
                  <div>
                    <div class="md-form mt-0">
                      <input type="text" class="form-control" formControlName="make_year">

                      <!-- <app-control-messages [control]="carForm.controls.year"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Make Month</label>
                  <div>
                    <div class="md-form mt-0">
                      <input type="text" class="form-control" formControlName="make_month">

                      <!-- <app-control-messages [control]="carForm.controls.year"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Mileage</label>
                  <div>
                    <div class="md-form mt-0">
                      <input type="text" class="form-control" formControlName="mileage" (keyup)="formatCurrency(carForm.controls.mileage)">
                      <!-- <app-control-messages [control]="carForm.controls.mileage"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Owners</label>
                  <div>
                    <div class="md-form mt-0">
                      <input type="text" class="form-control" formControlName="owners">
                      <!-- <app-control-messages [control]="carForm.controls.mileage"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Vehicle Type</label>
                  <div>
                    <div class="md-form mt-0">
                      <select class="form-control" formControlName="vehicle_type">
                        <option *ngFor="let vehicleType of vehicleTypes$ | async" [value]="vehicleType.vehicle_type_id">{{vehicleType.name}}</option>

                      </select>
                      <!-- <app-control-messages [control]="carForm.controls.vehicleType"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Fuel Type</label>
                  <div>
                    <div class="md-form mt-0">
                      <select class="form-control" formControlName="fuel_type">
                        <option *ngFor="let fuelType of fuelTypes$ | async" [value]="fuelType.fuel_type_id">{{fuelType.name}}</option>

                      </select>
                      <!-- <app-control-messages [control]="carForm.controls.fuelType"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Transmission Type</label>
                  <div>
                    <div class="md-form mt-0">
                      <select class="form-control"  formControlName="transmission_type">
                        <option *ngFor="let transmissionType of transmissionTypes$ | async" [value]="transmissionType.transmission_type_id">{{transmissionType.name}}</option>

                      </select>
                      <!-- <app-control-messages [control]="carForm.controls.transmissionType"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Insurance Type</label>
                  <div>
                    <div class="md-form mt-0">
                      <select class="form-control"  formControlName="insurance_type">
                        <option *ngFor="let insuranceType of insuranceTypes$ | async" [value]="insuranceType.insurance_type_id">{{insuranceType.name}}</option>
                      </select>
                      <!-- <app-control-messages [control]="carForm.controls.insuranceType"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Insurance</label>
                  <div>
                    <div class="md-form mt-0">
                      <select class="form-control" formControlName="insurance">
                        <option *ngFor="let insurance of insurances$ | async" [value]="insurance.insurance_id">{{insurance.name}}</option>
                      </select>
                      <!-- <app-control-messages [control]="carForm.controls.insurance"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Insurance Year</label>
                  <div>
                    <div class="md-form mt-0">
                      <input type="text" class="form-control" formControlName="insurance_year">
                      <!-- <app-control-messages [control]="carForm.controls.year"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Exterior Color</label>
                  <div>
                    <div class="md-form mt-0">
                      <select class="form-control"  formControlName="exterior_color">
                        <option *ngFor="let color of colors$ | async" [value]="color.color_id">{{color.name}}</option>
                      </select>
                      <!-- <app-control-messages [control]="carForm.controls.color"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Interior Color</label>
                  <div>
                    <div class="md-form mt-0">
                      <select class="form-control"  formControlName="interior_color">
                        <option *ngFor="let color of colors$ | async" [value]="color.color_id">{{color.name}}</option>
                      </select>
                      <!-- <app-control-messages [control]="carForm.controls.color"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Fuel Economy</label>
                  <div>
                    <div class="md-form mt-0">
                      <input type="text" class="form-control" formControlName="fuel_economy">
                      <!-- <app-control-messages [control]="carForm.controls.PurchasedFor"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <div class="form-group">
                    <label class="col-sm-3 col-form-label">Purchased On</label>
                    <div>
                      <div class="md-form mt-0">
                        <input type="date" class="form-control" formControlName="purchased_on">
                        <!-- <app-control-messages [control]="carForm.controls.purchasedOn"></app-control-messages> -->
                      </div>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Purchased From</label>
                  <div>
                    <div class="md-form mt-0">
                      <select class="form-control" formControlName="purchased_from">
                        <option *ngFor="let client of clients$ | async" [value]="client.client_id">{{client.name}}</option>
                      </select>
                      <!-- <app-control-messages [control]="carForm.controls.purchasedFrom"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 col-form-label">Purchased For</label>
                  <div>
                    <div class="md-form mt-0">
                      <input type="text" class="form-control" formControlName="cost_price" (keyup)="formatCurrency(carForm.controls.cost_price)">
                      <!-- <app-control-messages [control]="carForm.controls.PurchasedFor"></app-control-messages> -->
                    </div>
                  </div>
                </div>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" id="inputFlooded" formControlName="is_flooded">
                  <label class="form-check-label" for="inputFlooded">Is Flooded?</label>
                </div>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" id="inputAccidental" formControlName="is_accidental">
                  <label class="form-check-label" for="inputAccidental">Is Accidental?</label>
                </div>

              <div class="form-check">
                <input type="checkbox" class="form-check-input" id="inputSold" formControlName="is_sold" (change)="is_sold()">
                <label class="form-check-label" for="inputSold">Is Sold?</label>
              </div>
                <div class="form-group">
                <label class="col-sm-3 col-form-label">Sold On</label>
                <div>
                  <div class="md-form mt-0">
                    <input type="date" class="form-control" formControlName="sold_on">
                    <!-- <dl-date-time-picker minView='day' formControlName="sold_on" data-datetimepicker-config="{ dropdownSelector: '#dropdown1' }"></dl-date-time-picker> -->
                    <!-- <app-control-messages [control]="carForm.controls.soldOn"></app-control-messages> -->
                  </div>
                </div>
              </div>
                <div class="form-group">
                <label class="col-sm-3 col-form-label">Sold To</label>
                <div>
                  <div class="md-form mt-0">
                    <select class="form-control"  formControlName="sold_to">
                      <option *ngFor="let client of clients$ | async" [value]="client.client_id">{{client.name}}</option>
                    </select>
                    <!-- <app-control-messages [control]="carForm.controls.soldTo"></app-control-messages> -->
                  </div>
                </div>
              </div>
                <div class="form-group">
                <label class="col-sm-3 col-form-label">Sold For</label>
                <div>
                  <div class="md-form mt-0">
                    <input type="text" class="form-control " formControlName="selling_price" (keyup)="formatCurrency(carForm.controls.selling_price)">
                    <!-- <app-control-messages [control]="carForm.controls.soldFor"></app-control-messages> -->
                  </div>
                </div>
              </div>
                <div class="form-group">
                <label class="col-sm-3 col-form-label">Upload Photos</label>
                <div>
                  <div class="md-form mt-0">
                    <input type="file" multiple="multiple" name="fileUpload">
                    <!-- <app-control-messages [control]="carForm.controls.soldFor"></app-control-messages> -->
                  </div>
                </div>
              </div>
                <div class="text-right">
                  <button type="submit" class="btn btn-primary btn-custom btn-md" >
                    <i class="fa fa-save"></i>
                  </button>
                  <app-simple-modal [module]="module" [mode]="mode" [name]="carForm.controls.make.value" (isDelete)="deleteCar($event)"></app-simple-modal>

                </div>
              </div>
            </form>
          </div>
        </div>
      </mat-tab>
      <mat-tab *ngIf="selectedCar_Id" class="col-12" label="Transaction Details">
      <app-transaction-details (opMessage)="setMessage($event)" [investors$]="investors$" [transactionTypes$]="transactionTypes$" [expenses$]="expenses$" [carForm]="carForm"></app-transaction-details>
      </mat-tab>
    </mat-tab-group>
  </div>
</section>
